<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robo-Stream</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/wails/ipc.js"></script>
    <script src="/wails/runtime.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- DECK VIEW - Main Stream Deck Interface -->
    <div id="deck-view" class="deck-view">
        <div class="deck-header">
            <h1 class="deck-title">Robo-Stream</h1>
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-indicator" id="stream-indicator"></span>
                    <span class="status-label">Streaming</span>
                </div>
                <div class="status-item">
                    <span class="status-indicator" id="record-indicator"></span>
                    <span class="status-label">Recording</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Scene:</span>
                    <span class="status-value" id="current-scene">-</span>
                </div>
            </div>
        </div>

        <div class="deck-container">
            <div id="button-grid" class="button-grid">
                <!-- Buttons will be dynamically generated here -->
            </div>
        </div>

        <div class="deck-footer">
            <button id="btn-configure" class="btn btn-config">‚öôÔ∏è Configure</button>
            <button id="btn-fullscreen" class="btn">‚õ∂ Fullscreen</button>
        </div>
    </div>

    <!-- CONFIG VIEW - Configuration Interface -->
    <div id="config-view" class="config-view">
        <div class="config-container">
            <div class="config-header">
                <h1 class="config-title">Configuration</h1>
                <div class="config-nav">
                    <button id="btn-back-to-deck" class="btn-back">‚Üê Back to Deck</button>
                    <button id="btn-save-all" class="btn-save-all">üíæ Saved</button>
                </div>
            </div>

            <!-- Grid Configuration Section -->
            <div class="config-section">
                <h2>Grid Configuration</h2>
                <div class="grid-config">
                    <div class="grid-input">
                        <label for="grid-rows">Rows</label>
                        <input type="number" id="grid-rows" min="1" max="10" value="3">
                    </div>
                    <div class="grid-input">
                        <label for="grid-cols">Columns</label>
                        <input type="number" id="grid-cols" min="1" max="10" value="4">
                    </div>
                    <button id="btn-update-grid" class="btn-update-grid">Update Grid</button>
                </div>
            </div>

            <!-- Server Configuration -->
            <div class="config-section">
                <h2>Server Configuration</h2>
                <div class="grid-config">
                    <div class="grid-input">
                        <label for="server-url">Server URL</label>
                        <input type="text" id="server-url" placeholder="http://localhost:8080" value="">
                    </div>
                    <button id="btn-update-server" class="btn-update-grid">Update Server</button>
                </div>
            </div>

            <!-- Buttons Configuration Section -->
            <div class="config-section">
                <div class="button-list-header">
                    <h2>Buttons</h2>
                    <button id="btn-add-button" class="btn-add">+ Add Button</button>
                </div>
                <div id="button-list" class="button-list">
                    <!-- Button cards will be dynamically generated here -->
                </div>
                <div id="button-empty-state" class="button-empty-state" style="display: none;">
                    <p>No buttons configured yet</p>
                    <button class="btn-add">+ Add Your First Button</button>
                </div>
            </div>
        </div>
    </div>

    <!-- BUTTON CONFIGURATION MODAL -->
    <div id="config-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configure Button</h2>
            </div>
            <form id="button-config-form">
                <div class="form-group">
                    <label for="button-text">Button Text</label>
                    <input type="text" id="button-text" name="text" placeholder="e.g., Start Stream" required>
                </div>

                <div class="form-group">
                    <label for="button-color">Button Color</label>
                    <input type="color" id="button-color" name="color" value="#3498db">
                </div>

                <div class="form-group">
                    <label for="button-icon">Icon (Optional)</label>
                    <select id="button-icon" name="icon">
                        <option value="">-- No Icon --</option>
                        <option value="video">üìπ Video Camera</option>
                        <option value="play">‚ñ∂Ô∏è Play</option>
                        <option value="pause">‚è∏Ô∏è Pause</option>
                        <option value="stop-circle">‚èπÔ∏è Stop</option>
                        <option value="radio">üì° Live/On Air</option>
                        <option value="wifi">üì∂ Streaming</option>
                        <option value="circle">‚è∫Ô∏è Record</option>
                        <option value="disc">üíø Recording</option>
                        <option value="save">üíæ Save</option>
                        <option value="mic">üé§ Microphone</option>
                        <option value="mic-off">üé§üö´ Mic Muted</option>
                        <option value="volume-2">üîä Volume</option>
                        <option value="volume-x">üîá Muted</option>
                        <option value="headphones">üéß Headphones</option>
                        <option value="layout">üì∫ Scene Layout</option>
                        <option value="layers">üìÑ Layers</option>
                        <option value="grid-3x3">‚äû Grid</option>
                        <option value="maximize">‚õ∂ Fullscreen</option>
                        <option value="camera">üì∑ Camera</option>
                        <option value="camera-off">üì∑üö´ Camera Off</option>
                        <option value="settings">‚öôÔ∏è Settings</option>
                        <option value="star">‚≠ê Favorite</option>
                        <option value="heart">‚ù§Ô∏è Like</option>
                        <option value="zap">‚ö° Power</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="action-type">Action</label>
                    <select id="action-type" name="action_type" required>
                        <option value="">-- Select Action --</option>
                        <optgroup label="Scenes">
                            <option value="switch_scene">Switch to Scene</option>
                        </optgroup>
                        <optgroup label="Streaming">
                            <option value="toggle_stream">Toggle Streaming</option>
                            <option value="start_stream">Start Streaming</option>
                            <option value="stop_stream">Stop Streaming</option>
                        </optgroup>
                        <optgroup label="Recording">
                            <option value="toggle_record">Toggle Recording</option>
                            <option value="start_record">Start Recording</option>
                            <option value="stop_record">Stop Recording</option>
                            <option value="pause_record">Pause Recording</option>
                            <option value="resume_record">Resume Recording</option>
                        </optgroup>
                        <optgroup label="Audio Control">
                            <option value="mute_input">Mute Audio Input</option>
                            <option value="unmute_input">Unmute Audio Input</option>
                            <option value="toggle_input_mute">Toggle Input Mute</option>
                            <option value="set_input_volume">Set Input Volume</option>
                        </optgroup>
                        <optgroup label="Sources">
                            <option value="set_source_visibility">Set Source Visibility</option>
                            <option value="take_screenshot">Take Screenshot</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Scene selection -->
                <div id="scene-param" class="form-group" style="display: none;">
                    <label for="scene-name">Scene Name</label>
                    <select id="scene-name" name="scene_name">
                        <option value="">-- Select Scene --</option>
                    </select>
                </div>

                <!-- Input selection -->
                <div id="input-param" class="form-group" style="display: none;">
                    <label for="input-name">Input Name</label>
                    <select id="input-name" name="input_name">
                        <option value="">-- Select Input --</option>
                    </select>
                </div>

                <!-- Volume control -->
                <div id="volume-param" class="form-group" style="display: none;">
                    <label for="volume-db">Volume (dB)</label>
                    <input type="number" id="volume-db" name="volume_db" min="-100" max="26" step="0.1" value="0">
                    <small>Range: -100 dB (muted) to +26 dB (amplified)</small>
                </div>

                <!-- Source visibility -->
                <div id="source-param" class="form-group" style="display: none;">
                    <label for="source-name">Source Name</label>
                    <input type="text" id="source-name" name="source_name" placeholder="e.g., Webcam">
                </div>

                <div id="visibility-param" class="form-group" style="display: none;">
                    <label for="visibility">Visible</label>
                    <select id="visibility" name="visible">
                        <option value="true">Show</option>
                        <option value="false">Hide</option>
                    </select>
                </div>

                <!-- Screenshot -->
                <div id="screenshot-param" class="form-group" style="display: none;">
                    <label for="file-path">Save Path</label>
                    <input type="text" id="file-path" name="file_path" placeholder="/path/to/screenshot.png">
                    <small>Full path including filename</small>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-form-save">Save</button>
                    <button type="button" id="cancel-btn" class="btn-form-cancel">Cancel</button>
                    <button type="button" id="delete-btn" class="btn-form-delete" style="display: none;">Delete</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
